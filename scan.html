<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>GoodDealï½œæƒææ¢ç¢¼</title>

<script src="https://unpkg.com/quagga@0.12.1/dist/quagga.min.js"></script>

<style>
body {
	font-family: "Microsoft JhengHei", sans-serif;
	background: #ffffff;
	margin: 0;
	color: #333;
}

/* å°è¦½åˆ— */
nav {
	width: 100%;
	background: #fff;
	border-bottom: 1px solid #eee;
	position: sticky;
	top: 0;
	z-index: 100;
}

.nav-container {
	max-width: 1100px;
	margin: auto;
	padding: 12px 20px;
	display: flex;
	justify-content: space-between;
	align-items: center;
}

.logo {
	font-size: 22px;
	font-weight: bold;
}

/* ä¸»å…§å®¹ */
.main {
	max-width: 600px;
	margin: 0 auto;
	padding: 20px;
	text-align: center;
}

h2 {
	font-size: 24px;
	margin-bottom: 10px;
}

.desc {
	color: #666;
	font-size: 14px;
	margin-bottom: 16px;
}

/* æƒæè¦–çª— */
#interactive.viewport {
	width: 100%;
	height: 280px;
	border-radius: 14px;
	overflow: hidden;
	border: 2px solid #ddd;
	box-shadow: 0 2px 10px rgba(0,0,0,0.06);
}

#interactive.viewport video,
#interactive.viewport canvas {
	width: 100%;
	height: 100%;
	object-fit: cover;
}

/* ç‹€æ…‹åˆ— */
#status {
	margin-top: 16px;
	padding: 12px;
	border-radius: 10px;
	background: #f7f7f7;
	font-size: 14px;
}

/* è¿”å›æŒ‰éˆ• */
.back-btn {
	margin-top: 20px;
	display: inline-block;
	padding: 10px 18px;
	border-radius: 10px;
	border: 1px solid #ccc;
	text-decoration: none;
	color: #333;
	font-size: 14px;
}
</style>
</head>

<body>

<!-- å°è¦½åˆ— -->
<nav>
	<div class="nav-container">
		<div class="logo">GoodDeal</div>
	</div>
</nav>

<!-- å…§å®¹ -->
<div class="main">
	<h2>æƒæå•†å“æ¢ç¢¼</h2>
	<div class="desc">è«‹å°‡å•†å“æ¢ç¢¼å°æº–ç•«é¢ä¸­å¤®</div>

	<div id="interactive" class="viewport"></div>

	<div id="status">ğŸ“· å•Ÿå‹•ç›¸æ©Ÿä¸­â€¦</div>

	<a href="index.html" class="back-btn">è¿”å›é¦–é </a>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {

	const status = document.getElementById("status");
	let scanned = false;

	Quagga.init({
		inputStream: {
			type: "LiveStream",
			target: document.querySelector("#interactive"),
			constraints: {
				facingMode: "environment"
			}
		},
		decoder: {
			readers: ["ean_reader", "ean_8_reader"],
			multiple: false
		},
		locator: {
			patchSize: "medium",
			halfSample: true
		}
	}, err => {
		if (err) {
			status.innerHTML = "âŒ ç„¡æ³•å•Ÿå‹•ç›¸æ©Ÿï¼Œè«‹ç¢ºèªæ¬Šé™";
			return;
		}
		Quagga.start();
		status.innerHTML = "ğŸ” æƒæä¸­ï¼Œè«‹å°æº–æ¢ç¢¼";
	});

	Quagga.onDetected(data => {
		if (scanned) return;

		scanned = true;
		const code = data.codeResult.code;

		status.innerHTML = `âœ… å·²æƒæï¼š${code}`;
		Quagga.stop();

		// è·³è½‰åˆ°æœå°‹é 
		setTimeout(() => {
			window.location.href = `search.html?barcode=4710088414052`;
		}, 600);
	});
});
</script>

</body>
</html>

